<!doctype html>

<html>
<head>
	<!-- Angular Material style sheet -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.1/angular-material.min.css">
	<style>
		html,body {
			position: absolute;
			top: 0; 
			bottom: 0;
			left: 0;
			right: 0;
			margin: 0;
			padding: 0;
			height: 100%;
			background-image: url("http://cs-server.usc.edu:45678/hw/hw8/images/background.png");

		}

		md-autocomplete-wrap.md-whiteframe-z1 {
			box-shadow: none;
		}
		#input-0{
			border:1.5px solid #cecece;
			border-radius:5px;
		}

		#input-0:focus {
			border:1.5px solid #81c2f1;
		}

		md-progress-linear { display: none; }

		md-autocomplete button { display: none !important; }

		.dropdown-toggle {
			width:100%;
		}
		#dropdown{
			background-color: white;
		}

		.glyphicon-star {
			color: yellow;
		}

		.panel-body {
		  position:relative;
		}

		.my-switch-animation-right.ng-enter {
		  -webkit-transition:.5s linear all;
		  -moz-transition:.5s linear all;
		  -o-transition:.5s linear all;
		  transition:.5s linear all;

		  position:absolute;
		  height:100%;
			width:80%;

		}

		.my-switch-animation-right.ng-enter {
		  right:100%;
		}

		.my-switch-animation-right.ng-enter.ng-enter-active {
		  right:10%;
		}


		.my-switch-animation-left.ng-enter {
		  -webkit-transition:.5s linear all;
		  -moz-transition:.5s linear all;
		  -o-transition:.5s linear all;
		  transition:.5s linear all;

		  position:absolute;
		  height:100%;
			width:80%;
		}

		.my-switch-animation-left.ng-enter {
		  left:100%;
		}

		.my-switch-animation-left.ng-enter.ng-enter-active {
		  left:10%;
		}

		.panel {
		  overflow:hidden;
		}


		#priceChart {
			float:right;
		}
	</style>

	<script src="https://code.highcharts.com/highcharts.src.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<!-- Angular Material requires Angular.js Libraries -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-sanitize.js"></script>
	<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
	<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

	<!-- Angular Material Library -->
	<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>

	<script>

	</script>
</head>

<body ng-app="firstApplication" ng-controller = "autoCompleteController as ctrl">
	<div class="container" style="margin-top:50px;">
		<div class="panel panel-default" layout = "column" style="padding:20px"ng-cloak>
			<h3 class="text-center">Stock Market Search</h3>
			<form name="autocompleteForm" ng-submit = "$event.preventDefault()" novalidate>
				<div class="row">
					<div class="col-md-3" style="margin:20px 0px;">	  
						<label for="symbol">Enter Stock Ticker Symbol: <span style="color:red">*</span></label>
					</div>	
					<div class="col-md-6" style="margin:20px 0px;">
						<md-autocomplete
							flex required
							md-input-class="form-control"
							md-input-name="autocomplete"
							md-selected-item = "ctrl.selectedItem"
							md-search-text-change = "ctrl.querySearch(ctrl.searchText)"
							md-search-text = "ctrl.searchText"
							md-selected-item-change = "ctrl.selectedItemChange(item)"
							md-items = "item in ctrl.results"
							md-item-text = "item.Symbol"
							md-min-length = "1"
							md-clear-button="false"
							placeholder = "e.g. AAPL">
							<md-item-template>
								 <span md-highlight-text = "ctrl.searchText"
										md-highlight-flags = "^i">{{item.Symbol}} - {{item.Name}} ({{item.Exchange}})</span>
							</md-item-template>

							<div ng-messages="autocompleteForm.$invalid">
					      <div ng-message="required">This field is required</div>
					    </div>

						</md-autocomplete>
					</div>
					<div class="col-md-3" style="margin:20px 0px;">
						<button type="button" class="btn btn-primary" ng-disabled="autocompleteForm.$invalid" ng-click="ctrl.getQuote(ctrl.searchText)">
							<span class="glyphicon glyphicon-search"></span> Get Quote
						</button>
						<button id="search-clear" type="button" ng-click="ctrl.clearSearch()" class="btn btn-default">
							<span class="glyphicon glyphicon-refresh"></span>		Clear
						</button>
					</div>
				</div>
			</form>
		</div>
		<hr>

	  <div class="view-slide" ng-switch on="view.slide" ng-init="view.slide='left'" ng-cloak>

	    <div ng-switch-when="left" class="my-switch-animation-left" >
	      <div class="panel panel-default" style="padding:15px 30px">
	        <div class="panel-heading row " style="position: relative; height: 55px;">
    				<span class="col" style="display:inline;font-weight: bold;font-size: 14px;position: absolute;top: 20px;">Favorite List</span>
    				<div class="col" style="display:inline; position:absolute; right:10px;">
    				<span class="hidden-xs">Automatic Refresh:</span>
    				<input type="checkbox" data-toggle="toggle">
	          <button class="btn btn-default" ng-click="ctrl.showFavorites()"><span class="glyphicon glyphicon-refresh"></span></button>
	          <button type="button" class="btn btn-default" ng-click="ctrl.showDetail()"><span class="glyphicon glyphicon-chevron-right"></span></button>
	          </div>
	        </div>
	        <div class="panel-body">
	        	<div class="container">
	        	<div class="row" style="font-weight: bold;position: relative; margin-bottom:20px">
	        		<div class="col-sm-1">
		        		Sort By
							</div>
							<div class="dropdown col-sm-3">
							  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
							    Dropdown
							    <span class="caret"></span>
							  </button>
							  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
							    <li><a href="#">Default</a></li>
							    <li><a href="#">Symbol</a></li>
							    <li><a href="#">Price</a></li>
							    <li><a href="#">Change</a></li>
							    <li><a href="#">Change Percent</a></li>
							    <li><a href="#">Volume</a></li>
							  </ul>
        			</div>
	        		<div class="col-sm-1">
		        		Order
	        		</div>
        			<div class="dropdown col-sm-3">
							  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
							    Dropdown
							    <span class="caret"></span>
							  </button>
							  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
							    <li><a href="#">Default</a></li>
							    <li><a href="#">Symbol</a></li>
							    <li><a href="#">Price</a></li>
							    <li><a href="#">Change</a></li>
							    <li><a href="#">Change Percent</a></li>
							    <li><a href="#">Volume</a></li>
							  </ul>
							</div>
	        	</div>
	        	</div>
	        	<div class="table-responsive">
					  <table class="table table-striped" ng-init="ctrl.showFavorites()">
				      <tr>
				        <th>Symbol</th>
				        <th>Stock Price</th>
				        <th>Change (Change Percent)</th>
				        <th>Volume</th>
				        <th></th>
				      </tr>
				      <tr ng-repeat="favorite in favorites">
				      	<td><a ng-click="ctrl.getQuote(favorite.symbol)">{{favorite.symbol}}</a></td>
				      	<td>{{favorite.stockPrice}}</td>
				      	<td>{{favorite.change}} ({{favorite.changePercent}})</td>
				      	<td>{{favorite.stockPrice}}</td>
				      	<td><button class="btn btn-default" ng-click="ctrl.updateFavorites(favorite.symbol)"><span class="glyphicon glyphicon-trash"></span></button></td>
				      </tr>
					  </table>
					  </div>
	        </div>
	      </div>
	    </div>

	    <div ng-switch-when="right" class="my-switch-animation-right" >
	      <div class="panel panel-default">
	        <div class="panel-heading">
	        	Stock Details
	          <button class="btn btn-default" ng-click="view.slide='left'"><span class="glyphicon glyphicon-chevron-left"></span></button>
	        </div>
	        <div class="panel-body">
		        <table>
		        	<tr>
		        		<td>
								  <table class="table table-striped">
								  	<tr>
					        		<td>
					        			Stock Details 
												<button type="button" class="btn btn-default" ng-bind-html="star" ng-click="ctrl.updateFavorites(symbol)">
												</button>
					        		</td>
								  	</tr>
							      <tr>
							        <th>Stock Ticker Symbol</th>
							        <td>{{symbol}}</td>
							      </tr>
							      <tr>
							        <th>Last Price</th>
							        <td>{{lastPrice}}</td>
							      </tr>
							      <tr>
							        <th>Change (Change Percent)</th>
							        <td>{{change}} ({{changePercent}})</td>
							      </tr>
							      <tr>
							        <th>Timestamp</th>
							        <td>{{timestamp}}</td>
							      </tr>
							      <tr>
							        <th>Open</th>
							        <td>{{open}}</td>
							      </tr>
							      <tr>
							        <th>Close</th>
							        <td>{{close}}</td>
							      </tr>
							      <tr>
							        <th>Day's Range</th>
							        <td>{{range}}</td>
							      </tr>
							      <tr>
							        <th>Volume</th>
							        <td>{{volume}}</td>
							      </tr>
								  </table>
							  </td>
							  <td>
								  <div id="priceChart"></div>
							  </td>
						  </tr>
					  </table>
	        </div>
	      </div>
	    </div>
	  </div>
	</div>

	<script src="script.js"></script>
</body>
</html>