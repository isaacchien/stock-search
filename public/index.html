<!doctype html>

<html>
<head>
	<!-- Angular Material style sheet -->
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
	<style>
		html, body {
			position: fixed;
			top: 0; 
			bottom: 0;
			left: 0;
			right: 0;
			margin: 0;
			padding: 0;
			height: 100%;
		}
		body {
			background-image: url("http://cs-server.usc.edu:45678/hw/hw8/images/background.png");
		}

		.container {
			margin-top:50px;
		}

		#dropdown{
			background-color: white;
		}



		.panel-body {
		  position:relative;
		}

		.my-switch-animation-right.ng-enter {
		  -webkit-transition:.5s linear all;
		  -moz-transition:.5s linear all;
		  -o-transition:.5s linear all;
		  transition:.5s linear all;

		  position:absolute;
		  height:100%;
			width:80%;

		}

		.my-switch-animation-right.ng-enter {
		  right:100%;
		}

		.my-switch-animation-right.ng-enter.ng-enter-active {
		  right:10%;
		}


		.my-switch-animation-left.ng-enter {
		  -webkit-transition:.5s linear all;
		  -moz-transition:.5s linear all;
		  -o-transition:.5s linear all;
		  transition:.5s linear all;

		  position:absolute;
		  height:100%;
			width:80%;
		}

		.my-switch-animation-left.ng-enter {
		  left:100%;
		}

		.my-switch-animation-left.ng-enter.ng-enter-active {
		  left:10%;
		}

		.panel {
		  overflow:hidden;
		}


		#priceChart {
			float:right;
		}
	</style>

	<script src="https://code.highcharts.com/highcharts.src.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


	<!-- Angular Material requires Angular.js Libraries -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-animate.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-aria.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular-messages.min.js"></script>

	<!-- Angular Material Library -->
	<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>

	<script>
		function clearSearch(){
			console.log('hi')
			document.getElementsByName('autocomplete')[0].value = '';
		}

	</script>
</head>

<body ng-app="firstApplication" ng-controller = "autoCompleteController as ctrl">
	<div class="container">
		<div class="panel panel-default" layout = "column" ng-cloak>
			<h4 class="text-center">Stock Market Search</h4>
			<form name="autocompleteForm" ng-submit = "$event.preventDefault()" novalidate="">
				<div class="row">
					<div class="col-md-3">	  
						<label for="symbol">Enter Stock Ticker Symbol: *</label>
					</div>	
					<div class="col-md-6">
						<md-autocomplete
							required
							md-input-name="autocomplete"
							md-selected-item = "ctrl.selectedItem"
							md-search-text-change = "ctrl.querySearch(ctrl.searchText)"
							md-search-text = "ctrl.searchText"
							md-selected-item-change = "ctrl.selectedItemChange(item)"
							md-items = "item in ctrl.results"
							md-item-text = "item.Symbol"
							md-min-length = "1"
							placeholder = "e.g. AAPL">
							<md-item-template>
								 <span md-highlight-text = "ctrl.searchText"
										md-highlight-flags = "^i">{{item.Symbol}} - {{item.Name}} ({{item.Exchange}})</span>
							</md-item-template>

							<div ng-messages="autocompleteForm.autocomplete.$error" ng-if="autocompleteForm.autocomplete.$touched && autocompleteForm.autocomplete.$invalid">
					      <div ng-message="required">This field is required</div>
					    </div>
						</md-autocomplete>
					</div>
					<div class="col-md-3">
						<button type="button" class="btn btn-primary" ng-disabled="autocompleteForm.$invalid" ng-click="ctrl.getQuote(ctrl.searchText)">
							<span class="glyphicon glyphicon-search"></span> Get Quote
						</button>
						<button id="search-clear" type="button" onclick="clearSearch()" class="btn btn-secondary">
							<span class="glyphicon glyphicon-remove"></span> Clear
						</button>
					</div>
				</div>
			</form>
		</div>
		<hr>

	  <div class="view-slide" ng-switch on="view.slide" ng-init="view.slide='left'" ng-cloak>

	    <div ng-switch-when="left" class="my-switch-animation-left" >
	      <div class="panel panel-default">
	        <div class="panel-heading">
	        	Favorite List
	          <button class="btn btn-info" style="right:0" ng-click="view.slide='right'">right</button>
	        </div>
	        <div class="panel-body">
					  <table class="table table-striped">
				      <tr>
				        <th>Symbol</th>
				        <th>Stock Price</th>
				        <th>Change (Change Percent)</th>
				        <th>Volume</th>
				      </tr>
				      <tr ng-repeat="favorite in favorites">
				      	<td>{{favorite}}</td>
				      </tr>
					  </table>
	        </div>
	      </div>
	    </div>

	    <div ng-switch-when="right" class="my-switch-animation-right" >
	      <div class="panel panel-default">
	        <div class="panel-heading">
	        	Stock Details
	          <button class="btn btn-info" ng-click="view.slide='left'">left</button>
	        </div>
	        <div class="panel-body">
		        <table>
		        	<tr>
		        		<td>
								  <table class="table table-striped">
								  	<tr>
					        		<td>
					        			Stock Details 
												<button type="button" class="btn btn-default" ng-click="ctrl.addFavorite(symbol)">
													<span class="glyphicon glyphicon-star-empty"></span>
												</button>
					        		</td>
								  	</tr>
							      <tr>
							        <th>Stock Ticker Symbol</th>
							        <td>{{symbol}}</td>
							      </tr>
							      <tr>
							        <th>Last Price</th>
							        <td>{{lastPrice}}</td>
							      </tr>
							      <tr>
							        <th>Change (Change Percent)</th>
							        <td>{{change}} ({{changePercent}})</td>
							      </tr>
							      <tr>
							        <th>Timestamp</th>
							        <td>{{timestamp}}</td>
							      </tr>
							      <tr>
							        <th>Open</th>
							        <td>{{open}}</td>
							      </tr>
							      <tr>
							        <th>Close</th>
							        <td>{{close}}</td>
							      </tr>
							      <tr>
							        <th>Day's Range</th>
							        <td>{{range}}</td>
							      </tr>
							      <tr>
							        <th>Volume</th>
							        <td>{{volume}}</td>
							      </tr>
								  </table>
							  </td>
							  <td>
								  <div id="priceChart"></div>
							  </td>
						  </tr>
					  </table>
	        </div>
	      </div>
	    </div>
	  </div>
	</div>

	<script src="script.js"></script>
</body>
</html>